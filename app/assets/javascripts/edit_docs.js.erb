jQuery(function($){

  var replace_content = function(e){
    var container      = $(e.currentTarget).closest(".edit-container")

    container.find(".replace-content").val($(e.currentTarget).html());
    container.find(".replace-area-content").html($(e.currentTarget).val());
  };

  var save_content = function(e){
    $(e.currentTarget).closest("form").find(".hidden-submit").click()
  }

  $(".editable-content, .editable-area-content").on("keydown", function(e){
    replace_content(e);
    save_content(e);
  });

//  $(document).on("click", function(e) {
//    if (!$(e.currentTarget).hasClass("editable-area-content")) {
//      $(".editable-area-content").removeClass("active");
//      e.stopPropagation();
//    }
//  });

  $(".replace-area-content").on("click", function(e){
    $(e.currentTarget).closest(".edit-container").find(".editable-area-content").addClass("active");
    e.stopPropagation();
  });
});
